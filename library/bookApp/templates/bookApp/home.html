{% extends "./layout.html" %}
{% load paginator_tags %}
{% block title%}
	Home
{% endblock%}
{% block content %}
	<div class="d-flex flex-column  justify-content-center text-center">
		<div class="input-group rounded m-5 align-self-start">
			<form action="{% url 'search-results' %}" method="get" class="d-flex flex-row">
				<input type="text" class="form-control rounded" placeholder="Search" aria-label="Search" aria-describedby="search-addon" name="q"/>
				<span class="input-group-text border-0" id="search-addon">
					<input type="submit" value="Upload" class="btn btn-primary">
				</span>
				
			</div>
			
			<div class="d-flex flex-wrap gap-5  border text-start">
				{% if books%}
					
					{% for book in books%}
						
						<!-- <a href={% url 'book-detail' book.id %} class="no-style"><div class="card mb-3  shadow-lg" style="max-width: 540px;"> -->
						<div class="card w-50 shadow" onclick="location.href={% url 'book-detail' book_id=book.id %};">
							<img class="card-img-top" src="{{book.cover_image.url}}" alt="Card image cap">
							<div class="card-body">
								<h5 class="card-title "><a href={% url 'book-detail' book_id=book.id %} class="bg-light text-dark" style="text-decoration: none;">{{book.title}}<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">
									<path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"/>
									<path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"/>
								</svg></a></h5>
								<p class="card-text">{{book.author}}</p>
								<div class="d-flex flex-row justify-content-between">
									<h4><span class="badge badge-secondary bg-info">{{ book.genre}}</span></h4>
									<p class="card-text"><small class="text-muted">{{ book.rating }}/5</small></p>
								</div>
							</div>
						</div>
						
					{% endfor%}
				{% else %}
					<h2 class="text-center">No books in the system, visit later!</h2>
				{% endif %}
			</div>
			
			{% get_proper_elided_page_range paginator page_obj.number as page_range %} <!-- here -->
			<div class="d-flex m-3 justify-content-center  ">
				<hr>
				<nav aria-label="... text-center">
					<ul class="pagination">
						{% if page_obj.has_previous %}
							<li class="page-item">
								<a class="page-link" href="?page=1">&laquo; first</a>
							</li>
							<li class="page-item">
								<a class="page-link" href="?page={{ page_obj.previous_page_number }}">previous</a>
							</li>
							
						{% endif %}
						{% for i in page_range %}
							
							{% if page_obj.number == i %}
								<li class="active page-item">
									<span class="page-link">{{ i }}</span>
								</li>
							{% else %}
								{% if i == paginator.ELLIPSIS %}
									<li class="page-item">
										<span class="page-link">{{ paginator.ELLIPSIS }}</span>
									</li>
								{% else %}
									<li class="page-item">
										<a class="page-link" href="?page={{ i }}">{{ i }}</a>
									</li>
								{% endif %}
							{% endif %}
						{% endfor %}
						{% if page_obj.has_next %}
							
							<li class="page-item">
								<a class="page-link" href="?page={{ page_obj.next_page_number }}">next</a>
							</li>
							<li class="page-item">
								<a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
							</li>
						{% endif %}
					</ul>
				</nav>
			</div>
		</div>
	{% endblock %}